<script>
(function () {
  /* ... keep the countdown + cart wiring above as-is ... */

  // --- Stripe Fast Checkout links (Bundle, Jacket, Shorts)
  const STRIPE = {
    bundle: "https://buy.stripe.com/14AbJ12dpcuBgqx6x28N20c", // $199.99 Set
    jacket: "https://buy.stripe.com/dRm14ncS38el0rz7B68N20d", // $129.99 Jacket
    shorts: "https://buy.stripe.com/8x29ATdW79ipfmt3kQ8N20b"  // $89.99 Shorts
  };

  const UTM = { utm_source:'vsop', utm_medium:'site', utm_campaign:'vsop_stripe' };

  function withUTM(url) {
    try {
      const u = new URL(url);
      Object.entries(UTM).forEach(([k,v]) => u.searchParams.set(k,v));
      return u.toString();
    } catch { return url; }
  }

  function wireStripe(elId, url, label){
    const el = document.getElementById(elId);
    if (!el) return;
    el.addEventListener('click', () => {
      el.href = withUTM(url);
      try {
        if (typeof gtag === 'function') {
          gtag('event','click',{event_category:'stripe',event_label:label,value:1});
        }
      } catch {}
    });
  }

  // Hook up all Stripe buttons
  wireStripe('vsop-stripe-hero',   STRIPE.bundle, 'vsop_bundle_hero');
  wireStripe('vsop-stripe-bundle', STRIPE.bundle, 'vsop_bundle_card');
  wireStripe('vsop-stripe-sticky', STRIPE.bundle, 'vsop_bundle_sticky');
  wireStripe('vsop-stripe-jacket', STRIPE.jacket, 'vsop_jacket');
  wireStripe('vsop-stripe-shorts', STRIPE.shorts, 'vsop_shorts');

  // Show sticky Stripe bar on mobile only (keeps your existing logic)
  if (window.matchMedia('(max-width: 768px)').matches) {
    const bar = document.querySelector('.vsop-sticky-cta');
    if (bar) bar.style.display = 'block';
  }
})();
</script>

