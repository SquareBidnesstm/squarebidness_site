<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Your Cart — Square Bidness</title>
  <link rel="canonical" href="https://www.squarebidness.com/cart/" />
  <link rel="stylesheet" href="/styles/style.css" />
</head>
<body class="theme-dark">
  <div id="nav-placeholder"></div>
  <main class="section">
    <div class="container">
      <h1>Your Cart</h1>
      <div id="cart"></div>
      <div class="cta-row" style="margin-top:1rem">
        <a class="btn btn--gold" id="checkout" href="/checkout/">Proceed to Checkout</a>
        <a class="btn btn--ghost" href="/shop/">Continue Shopping</a>
      </div>
    </div>
  </main>
  <div id="footer-placeholder"></div>

  <script>
  document.addEventListener("DOMContentLoaded", async () => {
    try { document.getElementById("nav-placeholder").innerHTML = await (await fetch("/nav/")).text() } catch {}
    try { document.getElementById("footer-placeholder").innerHTML = await (await fetch("/footer/")).text() } catch {}

    const el = document.getElementById('cart');
    const cart = JSON.parse(localStorage.getItem('sb_cart_v1') || '[]');
    if (!cart.length) { el.innerHTML = '<p class="muted">Your cart is empty.</p>'; return; }

    const rows = cart.map(it => `
      <div class="cart-line" style="display:flex;gap:.75rem;align-items:center;border:1px solid #1f1f1f;border-radius:10px;padding:.5rem .75rem;margin:.4rem 0">
        ${it.image ? `<img src="${it.image}" alt="" style="width:56px;height:56px;object-fit:cover;border-radius:8px" />` : ``}
        <div style="flex:1">
          <div><strong>${it.name || it.sku || it.id}</strong></div>
          <div class="muted">$${Number(it.price||0).toFixed(2)} × ${Number(it.quantity||it.qty||1)}</div>
        </div>
        <div><strong>$${(Number(it.price||0) * Number(it.quantity||it.qty||1)).toFixed(2)}</strong></div>
      </div>
    `).join('');
    const total = cart.reduce((n,it)=> n + Number(it.price||0) * Number(it.quantity||it.qty||1), 0);
    el.innerHTML = rows + `<p style="text-align:right;margin-top:.5rem"><strong>Total: $${total.toFixed(2)}</strong></p>`;
  });
  </script>
  <script defer src="/scripts/global.js"></script>
</body>
</html>
