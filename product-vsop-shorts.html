<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=GT-PL3L8P53"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'GT-PL3L8P53');
  </script>

  <!-- Basics -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VSOP Shorts — Square Bidness</title>
  <link rel="stylesheet" href="styles/style.css" />

  <!-- SEO -->
  <link rel="canonical" href="https://squarebidness.com/product-vsop-shorts.html" />
  <meta name="description" content="VSOP Shorts in burgundy and brown. Athletic fit with embroidered mark. Fall 2025 limited run." />

  <!-- Open Graph -->
  <meta property="og:type" content="product" />
  <meta property="og:site_name" content="Square Bidness" />
  <meta property="og:title" content="VSOP Shorts — Square Bidness" />
  <meta property="og:description" content="Athletic fit with embroidered mark. Burgundy + Brown. Fall 2025 limited run." />
  <meta property="og:url" content="https://squarebidness.com/product-vsop-shorts.html" />
  <meta property="og:image" content="https://squarebidness.com/assets/vsop-shorts.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="1200" />
  <meta property="og:image:alt" content="VSOP matching shorts in burgundy and brown" />
  <meta property="product:price:amount" content="89.99" />
  <meta property="product:price:currency" content="USD" />

  <!-- Twitter / X -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@squarebidnesstm" />
  <meta name="twitter:title" content="VSOP Shorts — Square Bidness" />
  <meta name="twitter:description" content="Athletic fit with embroidered mark. Burgundy + Brown. Fall 2025 limited run." />
  <meta name="twitter:image" content="https://squarebidness.com/assets/vsop-shorts.jpg" />

  <!-- Favicons -->
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <meta name="theme-color" content="#000000" />
  <meta name="mobile-web-app-capable" content="yes" />

  <!-- Load Nav + Footer -->
  <script defer>
    document.addEventListener("DOMContentLoaded", () => {
      fetch("/nav.html").then(r => r.text()).then(d => {
        const slot = document.getElementById("nav-placeholder");
        if (slot) slot.innerHTML = d;
        const shopLink = document.querySelector('.main-nav a[href="/shop.html"], .main-nav a[href="shop.html"]');
        if (shopLink) shopLink.classList.add("active");
      });
      fetch("/footer.html").then(r => r.text()).then(d => {
        const slot = document.getElementById("footer-placeholder");
        if (slot) slot.innerHTML = d;
      });
    });
  </script>

  <!-- Breadcrumbs JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://squarebidness.com/" },
      { "@type": "ListItem", "position": 2, "name": "Shop", "item": "https://squarebidness.com/shop.html" },
      { "@type": "ListItem", "position": 3, "name": "VSOP Shorts", "item": "https://squarebidness.com/product-vsop-shorts.html" }
    ]
  }
  </script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "MerchantReturnPolicy",
  "@id": "https://squarebidness.com/returns.html#policy",
  "merchantReturnDays": 30,
  "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
  "returnMethod": "https://schema.org/ReturnByMail",
  "returnFees": "https://schema.org/ReturnShippingFees",
  "applicableCountry": "US"
}
</script>

  <!-- Product JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Product",
    "@id":"https://squarebidness.com/product-vsop-shorts.html#product",
    "name":"VSOP Shorts — Burgundy + Brown",
    "description":"Athletic fit with embroidered mark. Designed for Fall 2025. Limited run.",
    "image":["https://squarebidness.com/assets/vsop-shorts.jpg"],
    "sku":"vsop-shorts",
    "brand":{"@type":"Brand","name":"Square Bidness Apparel"},
    "url":"https://squarebidness.com/product-vsop-shorts.html",
    "hasMerchantReturnPolicy":{"@id":"https://squarebidness.com/returns.html#policy"},
    "offers":{
      "@type":"Offer",
      "priceCurrency":"USD",
      "price":"89.99",
      "availability":"https://schema.org/PreOrder",
      "url":"https://squarebidness.com/product-vsop-shorts.html",
      "itemCondition":"https://schema.org/NewCondition",
      "seller":{"@type":"Organization","name":"Square Bidness Apparel, LLC"}
    }
  }
  </script>
</head>

<body class="theme-dark" id="top">

  <!-- NAV -->
  <div id="nav-placeholder"></div>

  <!-- PAGE HERO -->
  <header class="page-hero">
    <div class="container">
      <h1 class="page-title">VSOP Shorts</h1>
      <p class="page-subtitle">Burgundy + Brown · Embroidered mark · Athletic fit</p>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="section">
    <div class="container">
      <div class="product-detail">
        
        <!-- Product Media -->
        <div class="product-detail__media">
          <img loading="lazy" 
               src="/assets/vsop-shorts.jpg"
               alt="VSOP matching shorts in burgundy and brown"
               class="product-detail__image">
        </div>

        <!-- Product Info -->
        <article class="product-detail__info"
                 data-id-base="vsop-shorts"
                 data-name-base="VSOP Shorts — Burgundy + Brown"
                 data-price="89.99"
                 data-image="/assets/vsop-shorts.jpg">
          
          <h2 class="product-detail__title">VSOP Shorts</h2>
          <p class="product-detail__description">
            Matching shorts for the VSOP set. Comfortable, durable, and embroidered for the finish.
          </p>
          <p class="product-detail__price">$89.99</p>

          <!-- Badges -->
          <p style="background:#8B0000;color:#fff;padding:.5rem .65rem;border-radius:6px;display:inline-block;margin:.5rem 0;font-weight:700">
            Preorder — ships Nov 1, 2025
          </p>
          <p style="background:#fff3cd;border:1px solid #ffe69c;padding:.4rem .6rem;border-radius:6px;display:inline-block;margin:.35rem 0 .5rem;font-weight:600;color:#222">
            Limited Production: 27 Sets Only
          </p>

          <!-- Quick help/returns link -->
          <div class="product-help" style="margin:.5rem 0 .75rem; font-size:.95rem; opacity:.9">
            <a href="/returns.html">30-day returns on unworn items</a> ·
            <a href="/returns.html#preorders">Preorder policy</a>
          </div>

          <!-- Contact Snippet -->
          <div id="contact-snippet"></div>

          <!-- Add to Cart Form -->
          <form id="pdp-form" class="product-form" novalidate>
            <div class="form-group">
              <label for="size" class="form-label">Size</label>
              <select id="size" class="form-select" required>
                <option value="" disabled selected>Select size</option>
                <option value="S">S</option>
                <option value="M">M</option>
                <option value="L">L</option>
                <option value="XL">XL</option>
                <option value="2XL">2XL</option>
                <option value="3XL">3XL</option>
              </select>
              <span id="size-error" class="form-error" style="display:none">Please select a size.</span>
            </div>

            <div class="form-group">
              <label for="qty" class="form-label">Quantity</label>
              <input id="qty" type="number" min="1" step="1" value="1" class="form-input" required>
            </div>

            <p id="stock-msg" class="stock-msg" style="margin:.5rem 0; opacity:.9"></p>

            <div class="product-form__actions" style="display:flex; gap:.5rem; flex-wrap:wrap;">
              <button id="pdp-submit" type="submit" class="btn btn--gold">Add to Cart</button>
              <button id="notify-btn" type="button" class="btn btn--ghost" style="display:none">Notify Me</button>
              <a class="btn btn--ghost" href="/shop.html">Back to Shop</a>
            </div>
          </form>

          <!-- Product Details -->
          <div class="product-details" style="margin-top:1rem">
            <h3>Details</h3>
            <ul>
              <li>Athletic fit design</li>
              <li>Embroidered Square Bidness mark</li>
              <li>Burgundy and brown colorway</li>
              <li>Matches VSOP Hooded Jacket</li>
              <li>Comfortable and durable fabric</li>
            </ul>
          </div>

          <!-- Related Products -->
          <div class="product-related" style="margin-top:1rem">
            <h3>Complete the Look</h3>
            <a href="/product-vsop-jacket.html" class="related-item">
              <img loading="lazy" src="/assets/vsop-jacket.jpg" alt="VSOP Hooded Jacket">
              <span>VSOP Hooded Jacket — $129.99</span>
            </a>
          </div>

          <!-- Returns / Preorder Expandable -->
          <details class="product-returns" style="margin-top:.75rem">
            <summary style="cursor:pointer">Returns & Preorders (quick view)</summary>
            <div style="margin-top:.5rem; opacity:.9">
              <p>Returns accepted within 30 days of delivery on unworn items with tags. 
              Preorders can be cancelled before shipment; after shipment, standard returns apply.</p>
              <p><a class="btn btn--ghost" href="/returns.html">Read full policy</a></p>
            </div>
          </details>

        </article>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <div id="footer-placeholder"></div>

  <!-- Cart System -->
  <script src="/scripts/cart.js"></script>
  
  <!-- Size/Stock Management -->
  <script>
  (function(){
    const PRODUCT_ID = 'vsop-shorts';
    const sizeSel    = document.getElementById('size');
    const qtyInp     = document.getElementById('qty');
    const submitBtn  = document.getElementById('pdp-submit');
    const notifyBtn  = document.getElementById('notify-btn');
    const stockMsg   = document.getElementById('stock-msg');
    const wrap       = document.querySelector('.product-detail__info');

    const FALLBACK = {
      "S":   { status:"in-stock",  stock:12 },
      "M":   { status:"in-stock",  stock:8  },
      "L":   { status:"low-stock", stock:2  },
      "XL":  { status:"in-stock",  stock:10 },
      "2XL": { status:"preorder",  stock:null, ship:"2025-11-01" },
      "3XL": { status:"coming-soon",stock:0, notify:true }
    };

    let sizeData = null;

    init();

    async function init(){
      sizeData = await loadSizes();
      applyToSelect(sizeData);
      sizeSel.addEventListener('change', () => updateUIForSize(sizeSel.value, sizeData));
      notifyBtn.addEventListener('click', onNotify);
      updateUIForSize(sizeSel.value, sizeData);
      
      // Load contact snippet
      fetch('/contact-snippet.html').then(r => r.text()).then(d => {
        const slot = document.getElementById('contact-snippet');
        if (slot) slot.innerHTML = d;
      }).catch(e => console.warn('Contact snippet failed to load:', e));
    }

    async function loadSizes(){
      try {
        const r = await fetch('/products.json', { cache:'no-store' });
        if (!r.ok) throw new Error('products.json not found');
        const all = await r.json();
        const p = all[PRODUCT_ID];
        if (!p || !p.sizes) throw new Error('sizes missing');
        return p.sizes;
      } catch(e){
        console.warn('Using FALLBACK sizes:', e.message);
        if (stockMsg) stockMsg.textContent = 'Note: Using cached inventory data.';
        return FALLBACK;
      }
    }

    function applyToSelect(map){
      for (const opt of sizeSel.options) {
        if (!opt.value) continue;
        const meta = map[opt.value];
        if (!meta) { opt.disabled = true; continue; }

        opt.disabled = (meta.status === 'sold-out' || meta.status === 'coming-soon');

        if (meta.status === 'low-stock')      opt.textContent = `${opt.value} — Only ${meta.stock} left`;
        else if (meta.status === 'preorder')  opt.textContent = `${opt.value} — Preorder`;
        else if (meta.status === 'sold-out')  opt.textContent = `${opt.value} — Sold Out`;
        else if (meta.status === 'coming-soon') opt.textContent = `${opt.value} — Coming Soon`;
        else                                   opt.textContent = opt.value;
      }
    }

    function updateUIForSize(size, map){
      stockMsg.textContent = '';
      notifyBtn.style.display = 'none';
      submitBtn.disabled = false;

      if (!size || !map[size]) {
        submitBtn.textContent = 'Add to Cart';
        return;
      }

      const meta = map[size];
      switch (meta.status) {
        case 'in-stock':
          submitBtn.textContent = 'Add to Cart';
          break;
        case 'low-stock':
          submitBtn.textContent = 'Add to Cart';
          stockMsg.textContent = `Only ${meta.stock} left — don't wait.`;
          break;
        case 'preorder':
          submitBtn.textContent = 'Preorder';
          stockMsg.textContent = meta.ship ? `Preorder — ships ${formatDate(meta.ship)}` : 'Preorder open.';
          break;
        case 'sold-out':
        case 'coming-soon':
          submitBtn.textContent = 'Unavailable';
          submitBtn.disabled = true;
          notifyBtn.style.display = '';
          stockMsg.textContent = (meta.status === 'sold-out')
            ? 'Sold out — get notified when restocked.'
            : 'Coming soon — get notified when available.';
          break;
      }
    }

    function onNotify(){
      const size = sizeSel.value;
      const qty  = Math.max(1, parseInt(qtyInp.value || '1', 10));
      const nameBase = wrap?.dataset.nameBase || 'VSOP Shorts';
      const subject = encodeURIComponent(`Notify Me — ${nameBase} (${size})`);
      const lines = [
        `Please notify me when this size is available:`,
        ``,
        `Product: ${nameBase}`,
        `Size: ${size}`,
        `Desired qty: ${qty}`,
        ``,
        `My name: `,
        `My email: `
      ];
      const body = encodeURIComponent(lines.join('\n'));
      location.href = `mailto:squarebidnessapparel@gmail.com?subject=${subject}&body=${body}`;
    }

    function formatDate(iso){
      try {
        const d = new Date(iso);
        return d.toLocaleDateString(undefined, { year:'numeric', month:'short', day:'numeric' });
      } catch { return iso; }
    }
  })();
  </script>

  <!-- Form Submission & Cart Integration -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('pdp-form');
    if (!form) return;

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const wrap = document.querySelector('.product-detail__info');
      const sizeSel = document.getElementById('size');
      const qtyInp  = document.getElementById('qty');
      const sizeErr = document.getElementById('size-error');

      const size = (sizeSel.value || '').trim();
      const qty  = Math.max(1, parseInt(qtyInp.value || '1', 10));
      
      if (!size) {
        if (sizeErr) sizeErr.style.display = '';
        sizeSel.focus();
        return;
      } else if (sizeErr) {
        sizeErr.style.display = 'none';
      }

      const idBase   = (wrap?.dataset.idBase || 'vsop-shorts').replace(/[^a-zA-Z0-9-]/g, '');
      const nameBase = wrap?.dataset.nameBase || 'VSOP Shorts';
      const price    = Number(wrap?.dataset.price || '89.99');
      const image    = wrap?.dataset.image || '/assets/vsop-shorts.jpg';

      const variantId = `${idBase}-${size}`;
      const item = {
        id: variantId,
        name: `${nameBase} (${size})`,
        price,
        image,
        qty
      };

      // Add to cart
      if (window.SB && typeof window.SB.addToCart === 'function') {
        window.SB.addToCart(item);
      } else {
        // Fallback
        const KEY = 'sb_cart';
        const cart = JSON.parse(localStorage.getItem(KEY) || '[]');
        const i = cart.findIndex(x => x.id === item.id);
        if (i >= 0) cart[i].qty += item.qty; else cart.push(item);
        localStorage.setItem(KEY, JSON.stringify(cart));
      }

      // GA4 tracking
      try {
        if (typeof gtag === 'function') {
          gtag('event', 'add_to_cart', {
            currency: 'USD',
            value: price * qty,
            items: [{
              item_id: variantId,
              item_name: item.name,
              price: price,
              quantity: qty
            }]
          });
        }
      } catch (_) {}

      // Redirect to cart with slight delay for toast
      setTimeout(() => window.location.href = '/cart.html', 500);
    });

    // Hide error when user picks a size
    const sizeSel = document.getElementById('size');
    sizeSel?.addEventListener('change', () => {
      const sizeErr = document.getElementById('size-error');
      if (sizeErr) sizeErr.style.display = 'none';
    });
  });
  </script>

  <!-- GA4 View Item Event -->
  <script>
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    event: 'view_item',
    ecommerce: {
      items: [{
        item_name: 'VSOP Shorts — Burgundy + Brown',
        item_id: 'vsop-shorts',
        price: 89.99,
        item_category: 'Apparel > Shorts',
        item_brand: 'Square Bidness Apparel'
      }]
    }
  });
  </script>

</body>
</html>
