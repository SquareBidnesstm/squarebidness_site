<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic head -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Order Confirmed — Square Bidness</title>

  <meta name="description" content="Thank you for your order from Square Bidness." />
  <link rel="canonical" href="https://www.squarebidness.com/checkout/success/" />
  <meta name="robots" content="noindex,nofollow" />

  <link rel="stylesheet" href="/styles/style.css" />
  <meta name="theme-color" content="#000000" />

  <!-- Nav/Footer auto-load -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      fetch("/nav/", { cache: "no-store" })
        .then(r => r.text())
        .then(html => { const slot = document.getElementById("nav-placeholder"); if (slot) slot.innerHTML = html; })
        .catch(()=>{});
      fetch("/footer/", { cache: "no-store" })
        .then(r => r.text())
        .then(html => { const slot = document.getElementById("footer-placeholder"); if (slot) slot.innerHTML = html; })
        .catch(()=>{});
    });
  </script>
</head>
<body class="theme-dark" id="top">
  <div id="nav-placeholder"></div>

  <main class="section">
    <div class="container" style="max-width:800px">
      <header style="margin-bottom:1.5rem;">
        <h1>Thank you for your order</h1>
        <p class="muted">You’re locked in. We'll email you details soon.</p>
      </header>

      <section id="order-block" style="border:1px solid #1f1f1f;border-radius:12px;background:#0e0e0e;padding:1rem 1.25rem;">
        <p><strong>Order ID:</strong> <span id="order-id">—</span></p>
        <p><strong>Total Paid:</strong> <span id="order-total">—</span></p>
        <p style="margin-top:.5rem;font-size:.9rem;opacity:.8;">
          Screenshot this for pickup if this was a local/homecoming buy.
        </p>

        <h2 style="margin-top:1rem;font-size:1rem;">Your Items</h2>
        <table style="width:100%;border-collapse:collapse;font-size:.9rem;">
          <thead>
            <tr style="text-align:left;border-bottom:1px solid #2a2a2a;">
              <th style="padding:.5rem 0;">Item</th>
              <th style="padding:.5rem 0;">Qty</th>
              <th style="padding:.5rem 0;">Price</th>
            </tr>
          </thead>
          <tbody id="order-lines"></tbody>
        </table>

        <div style="margin-top:1rem;font-size:.9rem;">
          <div><strong>Subtotal:</strong> <span id="sum-subtotal">$0.00</span></div>
          <div id="sum-discount-row" style="display:none;">
            <strong>Discount:</strong> <span id="sum-discount">-$0.00</span>
          </div>
          <div><strong>Tax:</strong> <span id="sum-tax">$0.00</span></div>
          <div><strong>Shipping:</strong> <span id="sum-shipping">$0.00</span></div>
          <div style="font-weight:700;margin-top:.5rem;"><strong>Total:</strong> <span id="sum-total">$0.00</span></div>
        </div>
      </section>

      <div style="margin-top:1.5rem;display:flex;flex-wrap:wrap;gap:.75rem;">
        <a class="btn btn--gold" href="/shop/">Continue Shopping</a>
        <a class="btn btn--ghost" href="/returns/">Returns & Policy</a>
      </div>

      <p style="font-size:.8rem;opacity:.6;margin-top:2rem;">
        Questions? Email
        <a href="mailto:squarebidnessapparel@gmail.com" style="color:#c9a227;text-decoration:underline;">
          squarebidnessapparel@gmail.com
        </a>
      </p>
    </div>
  </main>

  <div id="footer-placeholder"></div>

  <script>
    (function(){
      function money(n){
        return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(Number(n||0));
      }

      let data = null;
      try {
        data = JSON.parse(sessionStorage.getItem('sb_last_order') || 'null');
      } catch(_) {}

      if (!data) {
        // no stored data, show minimal
        document.getElementById('order-id').textContent = 'Unavailable';
        document.getElementById('order-total').textContent = '$0.00';
        document.getElementById('order-lines').innerHTML = '<tr><td colspan="3" style="padding:.5rem 0;">No line items.</td></tr>';
        return;
      }

      const {
        orderId,
        items,
        subtotal,
        discount,
        tax,
        total,
        shipping
      } = data;

      document.getElementById('order-id').textContent = orderId || '—';
      document.getElementById('order-total').textContent = money(total);

      // lines
      const tbody = document.getElementById('order-lines');
      tbody.innerHTML = (items||[]).map(i=>{
        return `
          <tr style="border-bottom:1px solid #2a2a2a;">
            <td style="padding:.5rem 0;">${i.name}</td>
            <td style="padding:.5rem 0;">${i.qty}</td>
            <td style="padding:.5rem 0;">${money(i.price)}</td>
          </tr>
        `;
      }).join('');

      // summary
      document.getElementById('sum-subtotal').textContent = money(subtotal);
      document.getElementById('sum-tax').textContent      = money(tax);
      document.getElementById('sum-total').textContent    = money(total);
      document.getElementById('sum-shipping').textContent = money(shipping||0);

      if (discount && Number(discount) > 0){
        document.getElementById('sum-discount').textContent = '-' + money(discount);
        document.getElementById('sum-discount-row').style.display = '';
      }
    })();
  </script>
</body>
</html>
