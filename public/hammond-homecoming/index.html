<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Perf -->
  <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://www.google-analytics.com">

  <!-- GA4 site-wide -->
  <script defer src="/scripts/ga.js"></script>

  <!-- Basics -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hammond Homecoming Week — $20 Hat | Square Bidness</title>
  <meta name="description" content="Limited Hammond Homecoming Week hat — just $20. While supplies last." />
  <link rel="canonical" href="https://www.squarebidness.com/hammond-homecoming/" />
  <meta name="robots" content="index,follow" />

  <!-- CSS -->
  <link rel="stylesheet" href="/styles/style.css" />

  <!-- Icons / PWA -->
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="apple-touch-icon" href="/assets/icons/icon-180.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#000000" />

  <!-- Open Graph (absolute URLs required) -->
  <meta property="og:type" content="product" />
  <meta property="og:site_name" content="Square Bidness" />
  <meta property="og:title" content="Hammond Homecoming Week — $20 Hat" />
  <meta property="og:description" content="Limited drop for Homecoming Week. Grab the hat for $20 while supplies last." />
  <meta property="og:url" content="https://www.squarebidness.com/hammond-homecoming/" />
  <!-- Use the 1200×630 crop if you made it; otherwise your 1200 will still render -->
  <meta property="og:image" content="https://www.squarebidness.com/hammond-homecoming/assets/og-hoco_1200x630.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="product:price:amount" content="20.00" />
  <meta property="product:price:currency" content="USD" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Hammond Homecoming Week — $20 Hat" />
  <meta name="twitter:description" content="Limited drop for Homecoming Week. $20 while supplies last." />
  <meta name="twitter:image" content="https://www.squarebidness.com/hammond-homecoming/assets/og-hoco_1200x630.jpg" />

  <!-- Organization JSON-LD (site-wide) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"Square Bidness Apparel",
    "url":"https://www.squarebidness.com/",
    "logo":"https://www.squarebidness.com/assets/cleantextlogo.png"
  }
  </script>

  <!-- Product JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Product",
    "@id":"https://www.squarebidness.com/hammond-homecoming/#product",
    "name":"Hammond Homecoming Hat",
    "description":"Limited Hammond Homecoming Week hat.",
    "image":[
      "https://www.squarebidness.com/hammond-homecoming/assets/og-hoco_1200x630.jpg"
    ],
    "sku":"hoco-hat",
    "brand":{"@type":"Brand","name":"Square Bidness Apparel"},
    "url":"https://www.squarebidness.com/hammond-homecoming/",
    "offers":{
      "@type":"Offer",
      "priceCurrency":"USD",
      "price":"20.00",
      "availability":"https://schema.org/InStock",
      "url":"https://www.squarebidness.com/hammond-homecoming/",
      "itemCondition":"https://schema.org/NewCondition",
      "seller":{"@type":"Organization","name":"Square Bidness Apparel, LLC"}
    }
  }
  </script>

  <!-- Load Nav + Footer -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      fetch("/nav/", { cache: "no-store" })
        .then(r => r.text()).then(d => { const slot = document.getElementById("nav-placeholder"); if (slot) slot.innerHTML = d; })
        .catch(()=>{});
      fetch("/footer/", { cache: "no-store" })
        .then(r => r.text()).then(d => { const slot = document.getElementById("footer-placeholder"); if (slot) slot.innerHTML = d; })
        .catch(()=>{});
    });
  </script>

  <!-- Cart core -->
  <script defer src="/scripts/sb-cart.js"></script>

  <style>
    .hoco-hero{position:relative;overflow:hidden}
    .hoco-hero__media img{width:100%;height:auto;display:block;border-radius:16px}
    .hoco-hero__copy{margin-top:1rem}
    .buybox{margin:1rem 0;padding:1rem;border:1px solid #1f1f1f;border-radius:12px;background:#0e0e0e}
    .buybox__row{display:grid;gap:.4rem;margin:.6rem 0}
    .buybox__qty{display:flex;gap:.4rem;align-items:center;max-width:180px}
    .buybox__qty input{background:#0f0f0f;border:1px solid #2a2a2a;border-radius:10px;color:#eee;padding:.6rem .7rem;width:5.5rem;text-align:center}
    .qty-btn{width:2.2rem;height:2.2rem;border-radius:10px;border:1px solid #2a2a2a;background:#151515;color:#eee;font-size:1rem}
    .buybox__actions{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.75rem}
    .buybox__msg{margin:.5rem 0 0;opacity:.9}
    .badge{display:inline-block;background:#8B0000;color:#fff;padding:.4rem .55rem;border-radius:8px;font-weight:800;border:1px solid #a22;margin:.5rem 0}
  </style>
</head>

<body class="theme-dark" id="top">
  <div id="nav-placeholder"></div>

  <main class="section">
    <div class="container">
      <!-- HERO -->
      <section class="hoco-hero">
        <picture class="hoco-hero__media" aria-hidden="true">
          <!-- use your existing sizes -->
          <source srcset="/hammond-homecoming/assets/og-hoco_1600.jpg" media="(min-width: 1000px)">
          <source srcset="/hammond-homecoming/assets/og-hoco_1200.jpg" media="(min-width: 700px)">
          <img src="/hammond-homecoming/assets/og-hoco_800.jpg" alt="Hammond Homecoming Week hat — Square Bidness">
        </picture>

        <div class="hoco-hero__copy">
          <h1>Hammond Homecoming Week</h1>
          <p class="tagline">Limited Hat — <strong>$20</strong></p>
          <p class="badge">In Stock • Local Pickup Available</p>
        </div>
      </section>

      <!-- BUY BOX (one-size) -->
      <section class="buybox"
        data-sku-base="hoco-hat"
        data-name="Hammond Homecoming Hat"
        data-price="20.00"
        data-image="/hammond-homecoming/assets/og-hoco_1200.jpg">

        <div class="buybox__row">
          <label class="buybox__label" for="qty">Quantity</label>
          <div class="buybox__qty">
            <button type="button" class="qty-btn" data-delta="-1" aria-label="Decrease quantity">−</button>
            <input id="qty" type="number" min="1" value="1" inputmode="numeric" />
            <button type="button" class="qty-btn" data-delta="1" aria-label="Increase quantity">+</button>
          </div>
        </div>

        <div class="buybox__actions">
          <button id="add-to-cart" class="btn btn--gold">Add to Cart — $20</button>
          <a class="btn btn--ghost" href="/shop/">Back to Shop</a>
        </div>

        <p id="buybox-msg" class="buybox__msg" role="status" aria-live="polite"></p>
      </section>

      <section class="section">
        <h3>Details</h3>
        <ul>
          <li>Classic fit, adjustable strap</li>
          <li>Embroidered mark</li>
          <li>Homecoming Week limited run</li>
        </ul>
      </section>
    </div>
  </main>

  <div id="footer-placeholder"></div>

  <!-- Buybox script -->
  <script>
  (function(){
    const box = document.querySelector('.buybox');
    if (!box) return;

    const qtyInp = box.querySelector('#qty');
    const addBtn = box.querySelector('#add-to-cart');
    const msg    = box.querySelector('#buybox-msg');

    // qty +/- buttons
    box.querySelectorAll('.qty-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const d = Number(btn.getAttribute('data-delta')||0);
        qtyInp.value = Math.max(1, (Number(qtyInp.value)||1) + d);
      });
    });

    function toast(t, ok=true){ msg.textContent = t; msg.style.color = ok ? '#9BEF9B' : '#ff9b9b'; }

    async function addToCart(line){
      if (window.SB?.cart?.add) return window.SB.cart.add(line);
      if (window.SB?.add)        return window.SB.add(line);
      if (window.SB_CART?.add)   return window.SB_CART.add(line);
      try {
        const KEY = 'sb_cart_v1';
        const data = JSON.parse(localStorage.getItem(KEY) || '[]');
        const i = data.findIndex(x => x.id === line.id);
        if (i >= 0) data[i].quantity += line.quantity; else data.push(line);
        localStorage.setItem(KEY, JSON.stringify(data));
      } catch(e){}
    }

    addBtn.addEventListener('click', async ()=>{
      const base  = box.getAttribute('data-sku-base'); // hoco-hat
      const name  = box.getAttribute('data-name');
      const price = Number(box.getAttribute('data-price'));
      const image = box.getAttribute('data-image') || '';
      const qty   = Math.max(1, Number(qtyInp.value)||1);

      const id = `sb-${base}`; // single-size
      const line = { id, sku:id, name, price, quantity:qty, image, url:location.pathname };

      try {
        await addToCart(line);
        toast('Added to cart.');
        // GA4 add_to_cart
        if (typeof gtag === 'function') {
          gtag('event','add_to_cart',{
            currency:'USD',
            value: price * qty,
            items:[{ item_id:id, item_name:name, price, quantity:qty }]
          });
        }
        // Optional: update nav badge
        const badge = document.querySelector('#cart-count');
        if (badge) {
          const current = Number(badge.textContent || '0') + qty;
          badge.textContent = current;
          badge.style.display = current > 0 ? 'inline-block' : 'none';
        }
      } catch(e){
        console.warn(e);
        toast('Could not add to cart. Try again.', false);
      }
    });

    // GA4 view_item on load
    try {
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        event:'view_item',
        ecommerce:{ items:[{ item_id:'sb-hoco-hat', item_name:'Hammond Homecoming Hat', price:20.00, item_category:'Accessories > Hats', item_brand:'Square Bidness Apparel' }] }
      });
    } catch(_){}
  })();
  </script>
</body>
</html>
