<!DOCTYPE html>
<html lang="en">
<head>
  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=GT-PL3L8P53"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'GT-PL3L8P53');
  </script>

  <!-- Basics -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VSOP Collection — Jacket + Shorts Set — Square Bidness</title>
  <link rel="stylesheet" href="styles/style.css" />

  <!-- SEO -->
  <link rel="canonical" href="https://squarebidness.com/product-vsop-set.html" />
  <meta name="description" content="VSOP Collection set: matching hooded jacket + shorts in burgundy and brown. Limited preorder. Ships Nov 1, 2025." />

  <!-- Open Graph -->
  <meta property="og:type" content="product" />
  <meta property="og:site_name" content="Square Bidness" />
  <meta property="og:title" content="VSOP Collection — Jacket + Shorts Set" />
  <meta property="og:description" content="Limited preorder: matching hooded jacket + shorts in burgundy + brown. Ships Nov 1, 2025." />
  <meta property="og:url" content="https://squarebidness.com/product-vsop-set.html" />
  <meta property="og:image" content="https://squarebidness.com/assets/vsop-set.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="1200" />
  <meta property="product:price:amount" content="199.99" />
  <meta property="product:price:currency" content="USD" />

  <!-- Twitter / X -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@squarebidnesstm" />
  <meta name="twitter:title" content="VSOP Collection — Jacket + Shorts Set" />
  <meta name="twitter:description" content="Limited preorder: matching hooded jacket + shorts in burgundy + brown. Ships Nov 1, 2025." />
  <meta name="twitter:image" content="https://squarebidness.com/assets/vsop-set.jpg" />

  <!-- Favicons -->
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <!-- Theme -->
  <meta name="theme-color" content="#000000" />
  <meta name="mobile-web-app-capable" content="yes" />

  <!-- Load Nav + Footer -->
  <script defer>
    document.addEventListener("DOMContentLoaded", () => {
      fetch("nav.html").then(r => r.text()).then(d => {
        const slot = document.getElementById("nav-placeholder");
        if (slot) slot.innerHTML = d;
        const shopLink = document.querySelector('.main-nav a[href="shop.html"]');
        if (shopLink) shopLink.classList.add("active");
      });
      fetch("footer.html").then(r => r.text()).then(d => {
        const slot = document.getElementById("footer-placeholder");
        if (slot) slot.innerHTML = d;
      });
    });
  </script>

  <!-- Breadcrumbs JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://squarebidness.com/"},
      {"@type":"ListItem","position":2,"name":"Shop","item":"https://squarebidness.com/shop.html"},
      {"@type":"ListItem","position":3,"name":"VSOP Set","item":"https://squarebidness.com/product-vsop-set.html"}
    ]
  }
  </script>

  <!-- Product JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Product",
    "@id":"https://squarebidness.com/product-vsop-set.html#product",
    "name":"VSOP Collection — Jacket + Shorts Set",
    "description":"Matching hooded jacket + shorts in burgundy & brown. Limited preorder. Ships Nov 1, 2025.",
    "image":["https://squarebidness.com/assets/vsop-set.jpg"],
    "sku":"vsop-set",
    "brand":{"@type":"Brand","name":"Square Bidness Apparel"},
    "url":"https://squarebidness.com/product-vsop-set.html",
    "hasMerchantReturnPolicy":{"@id":"https://squarebidness.com/returns.html#policy"},
    "offers":{
      "@type":"Offer",
      "priceCurrency":"USD",
      "price":"199.99",
      "availability":"https://schema.org/PreOrder",
      "url":"https://squarebidness.com/product-vsop-set.html",
      "itemCondition":"https://schema.org/NewCondition",
      "seller":{"@type":"Organization","name":"Square Bidness Apparel, LLC"}
    },
    "isAccessoryOrSparePartFor": [
      {"@type":"Product","sku":"vsop-jacket"},
      {"@type":"Product","sku":"vsop-shorts"}
    ]
  }
  </script>

  <!-- GA4 view_item -->
  <script>
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    event: 'view_item',
    ecommerce: {
      items: [{
        item_name: 'VSOP Collection — Jacket + Shorts Set',
        item_id: 'vsop-set',
        price: 199.99,
        item_category: 'Apparel > Sets',
        item_brand: 'Square Bidness Apparel'
      }]
    }
  });
  </script>
</head>

<body class="theme-dark" id="top">
  <!-- NAV -->
  <div id="nav-placeholder"></div>

  <!-- HERO -->
  <header class="page-hero">
    <div class="container">
      <h1 class="page-title">VSOP Collection — Jacket + Shorts Set</h1>
      <p class="page-subtitle">Burgundy + Brown · Limited preorder · Ships Nov 1, 2025</p>
    </div>
  </header>

  <!-- MAIN -->
  <main class="section">
    <div class="container">
      <div class="product-detail">

        <!-- Media -->
        <div class="product-detail__media">
          <img loading="lazy"
               src="assets/vsop-set.jpg"
               alt="VSOP set: matching hooded jacket and shorts in burgundy and brown"
               class="product-detail__image">
        </div>

        <!-- Info -->
        <article class="product-detail__info"
                 data-id-base="vsop-set"
                 data-name-base="VSOP Collection — Jacket + Shorts Set"
                 data-price="199.99"
                 data-image="assets/vsop-set.jpg">
          
          <h2 class="product-detail__title">VSOP Set (Jacket + Shorts)</h2>
          <p class="product-detail__description">
            Matching hooded jacket + shorts in our burgundy & brown colorway.
            Designed for durability and everyday luxury. Limited run only.
          </p>
          <p class="product-detail__price">$199.99</p>

          <!-- Badges -->
          <p style="background:#8B0000;color:#fff;padding:.5rem .65rem;border-radius:6px;display:inline-block;margin:.5rem 0;font-weight:700">
            Preorder — ships Nov 1, 2025
          </p>
          <p style="background:#fff3cd;border:1px solid #ffe69c;padding:.4rem .6rem;border-radius:6px;display:inline-block;margin:.35rem 0 .5rem;font-weight:600;color:#222">
            Limited Production: 27 Sets Only
          </p>

          <!-- Quick Links -->
          <div class="product-help" style="margin:.5rem 0 .75rem;font-size:.95rem;opacity:.9">
            <a href="returns.html">30-day returns on unworn items</a> ·
            <a href="returns.html#preorders">Preorder policy</a>
          </div>

          <div class="store-note" style="margin:.25rem 0 .75rem;font-size:.95rem;">
            <strong>Square Bidness Apparel, LLC — Louisiana</strong><br>
            Questions? <a href="mailto:marcus@squarebidness.com">marcus@squarebidness.com</a> ·
            <a href="tel:+19859747777">985-974-7777</a>
          </div>

          <!-- Form -->
          <form id="bundle-form" class="product-form" novalidate>
            <div class="form-group">
              <label for="jacket-size" class="form-label">Jacket Size</label>
              <select id="jacket-size" class="form-select" required>
                <option value="" disabled selected>Select jacket size</option>
                <option value="S">S</option><option value="M">M</option><option value="L">L</option>
                <option value="XL">XL</option><option value="2XL">2XL</option><option value="3XL">3XL</option>
              </select>
              <span id="jacket-error" class="form-error" style="display:none">Select a jacket size.</span>
            </div>

            <div class="form-group">
              <label for="shorts-size" class="form-label">Shorts Size</label>
              <select id="shorts-size" class="form-select" required>
                <option value="" disabled selected>Select shorts size</option>
                <option value="S">S</option><option value="M">M</option><option value="L">L</option>
                <option value="XL">XL</option><option value="2XL">2XL</option><option value="3XL">3XL</option>
              </select>
              <span id="shorts-error" class="form-error" style="display:none">Select a shorts size.</span>
            </div>

            <div class="form-group">
              <label for="bundle-qty" class="form-label">Quantity</label>
              <input id="bundle-qty" type="number" min="1" step="1" value="1" class="form-input" required>
            </div>

            <p id="bundle-stock-msg" class="stock-msg" style="margin:.5rem 0;opacity:.9"></p>

            <div class="product-form__actions" style="display:flex;gap:.5rem;flex-wrap:wrap;">
              <button id="bundle-submit" type="submit" class="btn btn--gold">Add Bundle to Cart — $199.99</button>
              <button id="bundle-notify" type="button" class="btn btn--ghost" style="display:none">Notify Me</button>
              <a class="btn btn--ghost" href="shop.html">Back to Shop</a>
            </div>
          </form>

          <!-- Details -->
          <div class="product-details" style="margin-top:1rem">
            <h3>Details</h3>
            <ul>
              <li>Matching jacket + shorts set</li>
              <li>Embroidered Square Bidness mark</li>
              <li>Burgundy & brown colorway</li>
              <li>Limited preorder only</li>
              <li>Unisex sizing</li>
            </ul>
          </div>

          <!-- Related -->
          <div class="product-related">
            <h3>Prefer single items?</h3>
            <div class="grid grid--auto">
              <a href="product-vsop-jacket.html" class="related-item">
                <img loading="lazy" src="assets/vsop-jacket.jpg" alt="VSOP Hooded Jacket">
                <span>VSOP Hooded Jacket — $129.99</span>
              </a>
              <a href="product-vsop-shorts.html" class="related-item">
                <img loading="lazy" src="assets/vsop-shorts.jpg" alt="VSOP Shorts">
                <span>VSOP Shorts — $89.99</span>
              </a>
            </div>
          </div>

          <!-- Returns quick view -->
          <details class="product-returns" style="margin-top:.75rem">
            <summary style="cursor:pointer">Returns & Preorders (quick view)</summary>
            <div style="margin-top:.5rem;opacity:.9">
              <p>Returns accepted within 30 days of delivery on unworn items with tags.
              Preorders can be cancelled before shipment; after shipment, standard returns apply.</p>
              <p><a class="btn btn--ghost" href="returns.html">Read full policy</a></p>
            </div>
          </details>
        </article>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <div id="footer-placeholder"></div>

  <!-- Cart helper -->
  <script src="scripts/cart.js"></script>

  <!-- Bundle logic -->
  <script>
  (function(){
    const PRODUCTS = { jacket: 'vsop-jacket', shorts: 'vsop-shorts', bundle: 'vsop-set' };
    const selJ = document.getElementById('jacket-size');
    const selS = document.getElementById('shorts-size');
    const qty  = document.getElementById('bundle-qty');
    const submit  = document.getElementById('bundle-submit');
    const notify  = document.getElementById('bundle-notify');
    const msg     = document.getElementById('bundle-stock-msg');
    const wrap    = document.querySelector('.product-detail__info');

    const errJ = document.getElementById('jacket-error');
    const errS = document.getElementById('shorts-error');

    let sizes = { jacket:null, shorts:null };

    init();

    async function init(){
      const map = await loadAll();
      sizes.jacket = map[PRODUCTS.jacket]?.sizes || {};
      sizes.shorts = map[PRODUCTS.shorts]?.sizes || {};

      // enhance selects with state
      applyToSelect(selJ, sizes.jacket);
      applyToSelect(selS, sizes.shorts);

      selJ.addEventListener('change', updateState);
      selS.addEventListener('change', updateState);
      notify.addEventListener('click', onNotify);

      updateState();

      // submit handler
      document.getElementById('bundle-form').addEventListener('submit', onSubmit);
    }

    async function loadAll(){
      try {
        const r = await fetch('/products.json', { cache:'no-store' });
        if (!r.ok) throw new Error('products.json not found');
        return await r.json();
      } catch(e){
        console.warn('Falling back to local states:', e.message);
        // minimal fallback (treat everything preorder)
        return {
          [PRODUCTS.jacket]: { sizes: { "S":st('in-stock'), "M":st('in-stock'), "L":st('low-stock',2), "XL":st('in-stock'), "2XL":st('preorder'), "3XL":st('coming-soon') } },
          [PRODUCTS.shorts]: { sizes: { "S":st('in-stock'), "M":st('in-stock'), "L":st('low-stock',2), "XL":st('in-stock'), "2XL":st('preorder'), "3XL":st('coming-soon') } },
          [PRODUCTS.bundle]: { price:199.99, image:'assets/vsop-set.jpg', name:'VSOP Collection — Jacket + Shorts Set' }
        };
      }
    }
    function st(status, stock){ return { status, stock: (typeof stock==='number'?stock:null), ship: (status==='preorder'?'2025-10-15':undefined) }; }

    function applyToSelect(selectEl, map){
      for (const opt of selectEl.options) {
        if (!opt.value) continue;
        const meta = map[opt.value];
        if (!meta) { opt.disabled = true; continue; }

        opt.disabled = (meta.status==='sold-out' || meta.status==='coming-soon');

        if (meta.status==='low-stock')        opt.textContent = `${opt.value} — Only ${meta.stock} left`;
        else if (meta.status==='preorder')    opt.textContent = `${opt.value} — Preorder`;
        else if (meta.status==='sold-out')    opt.textContent = `${opt.value} — Sold Out`;
        else if (meta.status==='coming-soon') opt.textContent = `${opt.value} — Coming Soon`;
        else                                   opt.textContent = opt.value;
      }
    }

    function updateState(){
      errJ.style.display = 'none';
      errS.style.display = 'none';
      msg.textContent = '';
      submit.disabled = false;
      notify.style.display = 'none';

      const j = selJ.value, s = selS.value;
      const jm = j && sizes.jacket[j];
      const sm = s && sizes.shorts[s];

      // If either size not chosen, just show default button text
      if (!j || !s) { submit.textContent = 'Add Bundle to Cart — $199.99'; return; }

      // Compute combined availability
      const states = [jm?.status, sm?.status];

      if (states.includes('sold-out') || states.includes('coming-soon')) {
        submit.disabled = true;
        submit.textContent = 'Unavailable';
        notify.style.display = '';
        msg.textContent = (states.includes('sold-out'))
          ? 'One or both sizes are sold out — get notified.'
          : 'One or both sizes are coming soon — get notified.';
        return;
      }

      if (states.includes('preorder')) {
        submit.textContent = 'Preorder Bundle — $199.99';
        msg.textContent = 'Preorder item — ships around Nov 1, 2025.';
      } else if (states.includes('low-stock')) {
        submit.textContent = 'Add Bundle to Cart — $199.99';
        msg.textContent = 'One or both sizes are low in stock — don’t wait.';
      } else {
        submit.textContent = 'Add Bundle to Cart — $199.99';
      }
    }

    function onNotify(){
      const j = selJ.value || '(not selected)';
      const s = selS.value || '(not selected)';
      const subject = encodeURIComponent('Notify Me — VSOP Set (bundle sizes)');
      const lines = [
        'Please notify me when this bundle is available in my sizes:',
        '',
        `Jacket size: ${j}`,
        `Shorts size: ${s}`,
        `Desired qty: ${Math.max(1, parseInt(qty.value||'1',10))}`,
        '',
        'My name: ',
        'My email: '
      ];
      const body = encodeURIComponent(lines.join('\n'));
      location.href = `mailto:squarebidnessapparel@gmail.com?subject=${subject}&body=${body}`;
    }

    function onSubmit(e){
      e.preventDefault();

      const j = selJ.value;
      const s = selS.value;
      if (!j) { errJ.style.display=''; selJ.focus(); return; }
      if (!s) { errS.style.display=''; selS.focus(); return; }

      const n = Math.max(1, parseInt(qty.value||'1', 10));

      // Build a single cart line for the bundle (with embedded size notes)
      const idBase   = wrap?.dataset.idBase || 'vsop-set';
      const nameBase = wrap?.dataset.nameBase || 'VSOP Collection — Jacket + Shorts Set';
      const price    = Number(wrap?.dataset.price || '199.99');
      const imageRel = (wrap?.dataset.image || 'assets/vsop-set.jpg').replace(/^\/?/,'');
      const imageAbs = imageRel.startsWith('http') ? imageRel : `https://squarebidness.com/${imageRel}`;

      const item = {
        id: `${idBase}-J${j}-S${s}`,               // e.g., vsop-set-J2XL-SL
        name: `${nameBase} — Jacket ${j} / Shorts ${s}`,
        price,
        image: imageAbs,
        qty: n,
        meta: { jacket: j, shorts: s }             // if you want to read later
      };

      if (window.SB && typeof window.SB.addToCart === 'function') {
        window.SB.addToCart(item);
      } else {
        const KEY = 'sb_cart_v1';
        const cart = JSON.parse(localStorage.getItem(KEY) || '[]');
        const i = cart.findIndex(x => x.id === item.id);
        if (i >= 0) cart[i].qty += item.qty; else cart.push(item);
        localStorage.setItem(KEY, JSON.stringify(cart));
      }

      // GA4 add_to_cart
      try {
        if (typeof gtag === 'function') {
          gtag('event', 'add_to_cart', {
            currency: 'USD',
            value: price * n,
            items: [{
              item_id: item.id,
              item_name: item.name,
              price: price,
              quantity: n
            }]
          });
        }
      } catch(_) {}

      // Go to cart
      window.location.href = '/cart.html';
    }
  })();
  </script>
  <script>
  (function () {
    const btn  = document.getElementById('bundle-deeplink');
    if (!btn) return;

    btn.addEventListener('click', function (e) {
      e.preventDefault();

      const jSel = document.getElementById('jacket-size');
      const sSel = document.getElementById('shorts-size');

      const j = jSel && jSel.value ? jSel.value : '';
      const s = sSel && sSel.value ? sSel.value : '';
      const q = 1; // or read from a qty input if you have one

      const url = new URL('/product-vsop-set.html', window.location.origin);
      if (j) url.searchParams.set('j', j);
      if (s) url.searchParams.set('s', s);
      if (q) url.searchParams.set('qty', String(q));

      window.location.href = url.toString();
    });
  })();
</script>

</body>
</html>
